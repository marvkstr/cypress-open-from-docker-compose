https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-cli-tutorial-fargate.html

cluster = cypressinit
config_name = cypressinit
role_name = ecsTaskExecutionRole
Access_key = AKIA3CYKIVHLI3MPUXUY
Secret_key = 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
profile_name = cypressinitprofile
region = eu-west-1

ATTACH ROLE:
aws iam attach-role-policy --role-name ecsTaskExecutionRole --policy-arn arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy

CREATE CLUSTER CONFIG:
ecs-cli configure --cluster cypressinit --default-launch-type FARGATE --config-name cypressinit --region eu-west-1

CREATE CLI PROFILE
ecs-cli configure profile --access-key AKIA3CYKIVHLI3MPUXUY --secret-key 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 --profile-name cypressinitprofile

CREATE CLUSTER
ecs-cli up --cluster-config cypressinit --ecs-profile cypressinitprofile
    VPC created: vpc-09b7465f101f78ba6
    Subnet created: subnet-084b1e5ea8068cdd4
    Subnet created: subnet-0d879ab79e8107a64

RETRIEVE DEFAULT VPC
aws ec2 describe-security-groups --filters Name=vpc-id,Values=vpc-09b7465f101f78ba6 --region eu-west-1
    {
        "SecurityGroups": [
            {
                "Description": "default VPC security group",
                "GroupName": "default",
                "IpPermissions": [
                    {
                        "IpProtocol": "-1",
                        "IpRanges": [],
                        "Ipv6Ranges": [],
                        "PrefixListIds": [],
                        "UserIdGroupPairs": [
                            {
                                "GroupId": "sg-0acbfd112e98ec0f8",
                                "UserId": "761841363414"
                            }
                        ]
                    }
                ],
                "OwnerId": "761841363414",
                "GroupId": "sg-0acbfd112e98ec0f8",
                "IpPermissionsEgress": [
                    {
                        "IpProtocol": "-1",
                        "IpRanges": [
                            {
                                "CidrIp": "0.0.0.0/0"
                            }
                        ],
                        "Ipv6Ranges": [],
                        "PrefixListIds": [],
                        "UserIdGroupPairs": []
                    }
                ],
                "VpcId": "vpc-09b7465f101f78ba6"
            }
        ]
    }

ADD SECURITY GROUP
aws ec2 authorize-security-group-ingress --group-id sg-0acbfd112e98ec0f8 --protocol tcp --port 8000 --cidr 0.0.0.0/0 --region eu-west-1

DEPLOY CLUSTER
ecs-cli compose --project-name cypressinit --file './e2e/docker-compose.aws.yml' service up --create-log-groups --cluster-config cypressinit --ecs-profile cypressinitprofile

VIEW CLUSTER
ecs-cli compose --project-name cypressinit --file './e2e/docker-compose.aws.yml' service ps --cluster-config cypressinit --ecs-profile cypressinitprofile
